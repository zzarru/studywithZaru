# Django Diary

글쓴이 : 자루





'23 0321

render와 redirect의 차이점

- render : 화면을 바로 그린다.  
- redirect : url로 보낸다.

![image-20230321150435770](C:\Users\SSAFY\AppData\Roaming\Typora\typora-user-images\image-20230321150435770.png) 
return없이 redirect를 쓰면 이동할 url을 알려주기만 한다. 

![image-20230321150412862](C:\Users\SSAFY\AppData\Roaming\Typora\typora-user-images\image-20230321150412862.png)
 return redirect를 쓰면, 이동할 url로 바로 이동!



분기를 해준다. 

분기 ; 명령 수행이 조건에 의해 순차적인 정상 순위에서 벗어나는 것. 또는, 이러한 일을 수행하는 기계어.



![](C:\Users\SSAFY\AppData\Roaming\Typora\typora-user-images\image-20230321145115015.png)

(views.py)

에이든 교수님이 return 빼먹음!!!!!!!! 교안에 없으니까 잘 확인하기

![image-20230321145212575](C:\Users\SSAFY\AppData\Roaming\Typora\typora-user-images\image-20230321145212575.png)

(detail.html)

method 지정 안해주면 default가 GET이니까 POST요청으로 바꿔줘야함!!!!!



---

### Django Form

1차적 목표 : form을 너무 많이 작성해야하는 건 번거롭다. 나는 만들어진 템플릿의 form을 쓰고 싶다~~~~ 



2차적 목표 : 버그 덩어리...! 유효성 검사가 필요하다. > 장고가 대신 해준다. 



---

'23 0322 권한과 인증



pip install pillow << 이게 먼데...

사전 설정 따라하기 : 앱 accounts 등록하기



인증을 하려면, 유저라는 게 있어야 한다. 

유저모델 자체도 쟝고는 제공해주고 있다. 



![image-20230322111649808](C:\Users\SSAFY\AppData\Roaming\Typora\typora-user-images\image-20230322111649808.png)

> 적는 위치는 상관없음



프로젝트 중간에 AUTH_USER_MODEL 변경 Noooooo.. 프로젝트 처음에 진행하기!

필드 추가하는 건 나중에 해도 괜찮다. 



데이터베이스 초기화

- 쟝고를 가지고 프로젝트를 진행 .. 코딩하는데 1시간 에러 정리하는데 2시간 함.

데이터베이스 모델링이 꼬인 경우, 데이터 베이스 초기화 하고 다시 하는 게 좋음



1) init 파일만 남기고 삭제하면 됨
2) db도 삭제한다.
3) migrations 진행



auth_user가 아니라 acounts_user로 테이블이 변경된다. 



### HTTP

1. 비연결지향

   서버는 요청에 대한 응답을 보낸 후 연결을 끊는다. 요청에 대해 일일이 응답하고 끝냄. 프로세스가 뭔가 단순하네..

2. 무상태(stateless)

   연결이 끊어지는 순간 클라이언트-서버 간의 통신은 끝난다.

   클라이언트와 서버가 주고받는 메시지들은 서로 완전히 독립적이다. 



이러한 HTTP의 특징으로 인해 데이터를 기억해줘!!! 하는 기술들이 생겨남 > 쿠키와 세션



### 쿠키

쿠키 == data 조각 (http의 특징을 보완해주는 역할)

클라이언트 > 서버 : 쿠키 한 조각 같이 줌 (로그인 정보를 같이 담아서)

이후에 클라이언트가 서버에게 요청을 보낼 때, 쿠키를 항상 같이 보낸다. 

서버는 이 때 로그인 정보가 있는 클라이언트인지 확인(쿠기 열기) 한다.

정보를 계속 준다 == 연결 상태를 유지한다. 

- 쿠키를 통해 사용자의 로그인 상태를 유지할 수 있다. 




### 세션

중요한 정보들은 쿠키에 담아서 보내면 위험함..!

HTTP : 무상태, 비연결

쿠키에 유저에 대한 데이터를 쿠키에 담아서 보내면 위험함!
그래서 유저에 대한 데이터는 서버에 저장해놓고, 쿠키에는 작은 메모만 !

데이터베이스에 세션 테이블을 만들고 세션id-value 태그를 만들어 여기(value)에 민감한 정보를 담는다. > 쿠키에는 session id만 담는다! > 쿠키를 받으면 세션의 id값을 받고 세션 테이블에서 해당 id에 맞는 value를 찾는다.



### 로그인

세션을 만드는 과정이다. 

![image-20230322104800614](C:\Users\SSAFY\AppData\Roaming\Typora\typora-user-images\image-20230322104800614.png)

템플릿 변수인 {{user}}를 view에서 넘겨준 적이 없어도.. 쟝고 템플릿에서 기본적으로 제공해주는 것들 중에 하나이다. 템플릿에서 user라는 걸 너무 많이 사용하니까 세션과 쿠키를 이용하여 인증을 하고 있다면 사용 가능하다. 



### 로그아웃

클라이언트와 서버에 있는 세션을 삭제하는 것. (둘 다 삭제해야된다. )











git bash에서 vs code 열기

`code .` 입력하면 된다. 







---

- 가상환경 세팅하기

  `pip install pillow` : 이미지 분석 및 처리를 쉽게 할 수 있는 라이브러리(Python Imaging Library:PIL)

  

  에러 `no such table` : migrate해줘야댐

  

  애플리케이션 만들 때, 계정 관련된 어플을 만들 때는 `accounts`로 이름을 만든다. (암묵적 약속)
